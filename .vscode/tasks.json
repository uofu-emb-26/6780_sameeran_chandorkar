{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Flash",
      "type": "process",
      "command": "openocd",
      "args": [
        // You may need to set this path argument
        // "-s",
        // "/usr/share/opencd/scripts",
        "-f",
        "interface/stlink.cfg",
        "-f",
        "target/stm32f0x.cfg",
        "-c",
        "program \"${command:cmake.launchTargetPath}\" verify reset exit"
      ],
      "problemMatcher": [],
      "windows": {
        "command": "openocd"
      }
    },
    {
      "label": "Flash (Cube)",
      "type": "process",
      "command": "cube",
      "args": [
        "programmer",
        "-c",
        "port=SWD",
        "-d",
        "${command:cmake.launchTargetPath}"
      ],
      "problemMatcher": [],
      "windows": {
        "command": "cube"
      }
    },
    {
      "label": "1. Configure (cmake -B)",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-B",
        "build",
        "-S",
        "./"
      ],
      "group": "build"
    },
    {
      "label": "2. Build All",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "build",
        "--target",
        "all"
      ],
      "group": "build",
      "problemMatcher": "$gcc"
    },
    {
      "label": "3. Flash Lab 1",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "build",
        "--target",
        "flash_lab1"
      ],
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "problemMatcher": "$gcc",
      "presentation": {
        "focus": true
      }
    },
    {
      "label": "4. Flash Lab 2",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "build",
        "--target",
        "flash_lab2"
      ],
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "problemMatcher": "$gcc",
      "presentation": {
        "focus": true
      }
    },
    {
      "label": "4. Flash Lab 3",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "build",
        "--target",
        "flash_lab3"
      ],
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "problemMatcher": "$gcc",
      "presentation": {
        "focus": true
      }
    },
    {
      "label": "4. Flash Lab 4",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "build",
        "--target",
        "flash_lab4"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": "$gcc",
      "presentation": {
        "focus": true
      }
    }
  ]
}